<ion-app>
  <ion-split-pane>
    <ion-menu>
      <ion-header>
        <ion-toolbar color="primary" class="user-profile">
          <ion-item margin-bottom lines="none">
            <ion-avatar slot="start" class="user-avatar">
              <img [src]="agencyUrl" />
            </ion-avatar>
            <ion-label>
              <ion-text color="light">
                <h2>
                  <strong>{{ agencyName }}</strong>
                </h2>
              </ion-text>
              <ion-text color="medium">
                <h3>
                  {{ region }}
                </h3>
              </ion-text>
              <ion-menu-toggle class="mto" auto-hide="false">
                <a class="text08" tappable (click)="goToEditProgile()">
                  <ion-text color="medium">
                    <strong
                      >{{
                        "SIDE_MENU_ITEMS.EDIT_PROFILE" | translate
                      }}
                      |</strong
                    >
                    <ion-icon name="create"></ion-icon>
                  </ion-text>
                </a>
                <!-- <ion-text color="secondary"> | </ion-text>
                                <a class="text08" tappable (click)="logout()">
                                    <ion-text color="medium">
                                        <ion-icon name="log-out"></ion-icon>
                                        <strong>logout</strong>
                                    </ion-text>
                                </a> -->
              </ion-menu-toggle>
            </ion-label>
          </ion-item>
        </ion-toolbar>
      </ion-header>

      <ion-content class="bg-profile">
        <div *ngFor="let page of pages" class="side-menu-list">
          <ion-menu-toggle *ngIf="page.url">
            <ng-container *ngIf="page.url !== '/login'; else logoutMenu">
              <ion-item
                lines="none"
                [routerLink]="page.url"
                routerDirection="root"
                routerLinkActive="active"
                detail="true"
              >
                <span
                  slot="start"
                  class="{{ page.icon }} side-menu-icon"
                  color="dark"
                ></span>
                <ion-label class="side-menu-title">
                  {{ page.title | translate }}
                </ion-label>
              </ion-item>
            </ng-container>
            <ng-template #logoutMenu>
              <ion-item lines="none" (click)="logout()" detail="true">
                <span
                  slot="start"
                  class="{{ page.icon }} side-menu-icon"
                  color="dark"
                ></span>
                <ion-label class="side-menu-title">
                  {{ page.title | translate }}
                </ion-label>
              </ion-item>
            </ng-template>
          </ion-menu-toggle>

          <ion-item
            lines="none"
            class="lang-bg"
            button
            *ngIf="page.children?.length > 0"
            (click)="page.open = !page.open"
            [class.active-parent]="page.open"
            detail="false"
          >
            <ion-icon
              slot="end"
              name="ios-arrow-forward"
              *ngIf="!page.open"
              class="toggle-arrow"
            ></ion-icon>
            <ion-icon
              slot="end"
              name="ios-arrow-down"
              *ngIf="page.open"
              class="toggle-arrow"
            ></ion-icon>
            <span slot="start" class="icon-language side-menu-icon"></span>
            <ion-label class="language side-menu-title">
              <span>{{ page.title | translate }}</span>
            </ion-label>
          </ion-item>
          <ion-list *ngIf="page.open">
            <ion-menu-toggle>
              <ion-list>
                <ion-radio-group
                  [value]="en"
                  [(ngModel)]="lang"
                  (ionChange)="switchLanguage()"
                >
                  <ion-item
                    *ngFor="let sub of page.children"
                    (click)="page.open = !page.open"
                    lines="none"
                  >
                    <ion-label class="side-menu-title">{{
                      sub.title
                    }}</ion-label>
                    <ion-radio slot="start" [value]="sub.value"></ion-radio>
                  </ion-item>
                </ion-radio-group>
              </ion-list>
            </ion-menu-toggle>
          </ion-list>
        </div>
        <ion-list> </ion-list>
      </ion-content>
    </ion-menu>
    <ion-router-outlet main></ion-router-outlet>
  </ion-split-pane>
</ion-app>
